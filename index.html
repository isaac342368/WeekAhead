<!DOCTYPE html>
<html>
<head>
  <title>Week Ahead</title>
  <link rel="icon" href="images/IMG-7558.jpg" type="image/jpg">
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    .logo img {
      max-width: 75px;
      height: auto;
    }

    .container {
      max-width: 400px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f2f2f2;
      border-radius: 5px;
    }
    .danger {
        color: red;
    }
    .warning {
        color: yellow;
    }

    .input-group {
      margin-bottom: 15px;
    }

    .input-group label {
      display: block;
      margin-bottom: 5px;
    }

    .input-group input,
    .input-group select {
      width: 100%;
      padding: 5px;
      border-radius: 3px;
      border: 1px solid #ccc;
    }

    .submit-btn {
      display: block;
      width: 100%;
      padding: 10px;
      background-color: #4CAF50;
      border: none;
      color: #fff;
      text-align: center;
      text-decoration: none;
      cursor: pointer;
      border-radius: 3px;
    }

    .result {
      margin-top: 15px;
      padding: 10px;
      background-color: #e6e6e6;
      border-radius: 3px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">
      <img src="images/IMG-7558.jpg" alt="Weekahead Logo">
    </div>
    <h2>The Activity Weather Planner</h2>
    <form id="activity-form">
        <div class="input group">
            <label for="activity-city"> City:</label>
            <select id = "activity-city">
                <option value="New York"> New York</option>
                <option value="San Antonio"> San Antonio</option>
                <option value="Chicago"> Chicago</option>
            </select>
        </div>
        <div class ="input group">
            <label for="temp-unit"> Unit: </label>
            <select id="temp-unit">
                <option value="f"> Farenheight</option>
                <option value="c"> Celcius</option>
            </select>
        </div>
        <!-- Add seven sets of input fields for each day -->
<div class="input-group">
  <label for="activity-date-1">Day 1 Date:</label>
  <input type="date" id="activity-date-1">
</div>
<div class="input-group">
  <label for="activity-date-2">Day 1 Date:</label>
  <input type="date" id="activity-date-1">
</div>
<div class="input-group">
  <label for="activity-date-3">Day 1 Date:</label>
  <input type="date" id="activity-date-1">
</div>
<div class="input-group">
  <label for="activity-date-4">Day 1 Date:</label>
  <input type="date" id="activity-date-1">
</div>
<div class="input-group">
  <label for="activity-date-5">Day 1 Date:</label>
  <input type="date" id="activity-date-1">
</div>
<div class="input-group">
  <label for="activity-date-6">Day 1 Date:</label>
  <input type="date" id="activity-date-1">
</div>
<div class="input-group">
  <label for="activity-date-7">Day 1 Date:</label>
  <input type="date" id="activity-date-1">
</div>



      <div class="input-group">
        <label for="activity-name">Activity Name:</label>
        <input type="text" id="activity-name" placeholder="Enter activity name">
      </div>
      <div class="input-group">
        <label for="activity-type">Activity Type:</label>
        <select id="activity-type">
          <option value="indoor">Indoor</option>
          <option value="outdoor">Outdoor</option>
        </select>
      </div>
      <div class="input-group">
        <label for="activity-date">Activity Date:</label>
        <input type="date" id="activity-date">
      </div>
      <div class="input-group">
        <label for="activity-time">Activity Time:</label>
        <input type="time" id="activity-time">
      </div>
      <button class="submit-btn" type="submit">Submit</button>
    </form>
    <div class="result" id="weather-result"></div>
  </div>

  <script>
    const activityForm = document.getElementById('activity-form');
    const weatherResult = document.getElementById('weather-result');

// Function to check if a weather code exists in the given array of weather codes
function isWeatherCodePresent(weatherCodes, code) {
  return weatherCodes.includes(code);
}

// Function to format the warning or note message with the appropriate style and prefix
function createMessage(isOutdoor, color, prefix, message) {
  const formattedMessage = `<br><strong style="color: ${color}">${prefix} ${message}</strong>`;
  return isOutdoor ? formattedMessage.replace("NOTE:", "WARNING:") : formattedMessage;
}

// Function to get the weather conditions for all the days
function getWeatherConditionsForAllDays() {
  const numDays = 7;
  const weatherPromises = [];

  for (let i = 1; i <= numDays; i++) {
    const activityDate = document.getElementById(`activity-date-${i}`).value;
    const selectedDate = new Date(activityDate);
    const currentDate = new Date();

    // Check if the date is in the future
    if (selectedDate > currentDate) {
      const promise = getWeatherCondition(selectedDate);
      weatherPromises.push(promise);
    }
  }

  return Promise.all(weatherPromises);
}

activityForm.addEventListener('submit', function(event) {
  event.preventDefault();

  // Get the weather conditions for all days
  getWeatherConditionsForAllDays()
    .then(weatherConditions => {
      // Clear previous weather results
      weatherResult.innerHTML = '';

      // Display weather conditions for each day
      weatherConditions.forEach((weatherCondition, index) => {
        if (!weatherCondition || !weatherCondition.current) {
          // Handle missing or invalid weather data for a day
          weatherResult.innerHTML += `<div>Day ${index + 1}: No weather data available.</div>`;
          return;
        }
        console.log(weatherCondition);
//       const temperature = weatherCondition.current.temperature;
//       const weatherCode = weatherCondition.current.weather_code;
//       const uv_index = weatherCondition.current.uv_index;
//         const humidity = weatherCondition.current.humidity;
//         const desc = weatherCondition.current.weather_descriptions[0];
         const feelslike = weatherCondition.current.feelslike;
       const cloudover = weatherCondition.current.cloudover;
         const precip = weatherCondition.current.precip;
         const pressure = weatherCondition.current.pressure;
         const visibility = weatherCondition.current.visibility;
//         const windspeed = weatherCondition.current.windspeed;

        const temperature = weatherCondition.current.temperature;
        const weatherCode = weatherCondition.current.weather_code;
        const uv_index = weatherCondition.current.uv_index;
        const humidity = weatherCondition.current.humidity;
        const desc = weatherCondition.current.weather_descriptions[0];
        const windspeed = weatherCondition.current.windspeed;
        // Add more weather properties if needed

        // Rest of your code to handle weather data...

        // Display weather information for each day
        let message = `<div><strong>Day ${index + 1}</strong>: The weather is expected to be ${desc}.`;
        //message += ` Temperature: ${temperature}Â°, UV Index: ${uv_index}, Humidity: ${humidity}%, Windspeed: ${windspeed} km/hr.</div>`;

        // Weather codes for different weather conditions
        const snowyCodes = [395, 338, 326];
const rainyCodes = [389, 359, 356];
const drizzleCodes = [353, 263];
const thunderstormCodes = [377];
const sleetCodes = [365, 317, 314];
const blizzardCode = 230;
const fogCode = 248;
        // Add your weather code checks here
        if (activityType === "outdoor") {
  let outdoorMessage = `The weather on ${activityDate} is expected to be ${desc}. Enjoy your ${activityType} activity "${activityName}"!`;

  if (temperature >= 90) {
    outdoorMessage += createMessage(true, "red", "WARNING:", "The temperature is above 90 degrees. Take necessary precautions for outdoor activities.");
  }
  if (uv_index >= 7) {
    outdoorMessage += createMessage(true, "red", "WARNING:", "The UV index is above 7 during this time. Take necessary precautions for outdoor activities.");
  }
  if (humidity >= 70) {
    outdoorMessage += createMessage(true, "red", "WARNING:", "The humidity is above 70% during this time. Take necessary precautions for outdoor activities.");
  }
  if (windspeed >= 32) {
    outdoorMessage += createMessage(true, "red", "WARNING:", "The wind speed is above 32 km/hr during this time. Take necessary precautions for outdoor activities.");
  }
  if (visibility < 3) {
    outdoorMessage += createMessage(true, "red", "WARNING:", "The visibility is less than 3 miles during this time. Take necessary precautions for outdoor activities.");
  }
  
  if (isWeatherCodePresent(snowyCodes, weatherCode)) {
    outdoorMessage += createMessage(true, "red", "WARNING:", "There is a good chance it might snow. Take necessary precautions for outdoor activities.");
  }
  if (isWeatherCodePresent(rainyCodes, weatherCode)) {
    outdoorMessage += createMessage(true, "red", "WARNING:", "There is a good chance it might rain. Take necessary precautions for outdoor activities.");
  }
  if (isWeatherCodePresent(drizzleCodes, weatherCode)) {
    outdoorMessage += createMessage(true, "red", "WARNING:", "There is a good chance of rain drizzle during this time. Take necessary precautions for outdoor activities.");
  }
  if (isWeatherCodePresent(thunderstormCodes, weatherCode)) {
    outdoorMessage += createMessage(true, "red", "WARNING:", "There is a good chance of a thunderstorm during this time! Take necessary precautions for outdoor activities.");
  }
  if (isWeatherCodePresent(sleetCodes, weatherCode)) {
    outdoorMessage += createMessage(true, "red", "WARNING:", "There is a good chance of sleet showers during this time. Take necessary precautions for outdoor activities.");
  }
  
  weatherResult.innerHTML += outdoorMessage;
}

// Check for indoor activities
if (activityType === "indoor") {
  let indoorMessage = `The weather on ${activityDate} is expected to be ${desc}. Enjoy your ${activityType} activity "${activityName}"!`;

  if (temperature >= 90) {
    indoorMessage += createMessage(false, "orange", "NOTE:", "The temperature is above 90 degrees. Take necessary precautions for indoor activities.");
  }
  if (uv_index >= 7) {
    indoorMessage += createMessage(false, "orange", "NOTE:", "The UV index is above 7 during this time. Take necessary precautions for indoor activities.");
  }
  if (humidity >= 70) {
    indoorMessage += createMessage(false, "#FFCC00", "NOTE:", "The humidity is above 70% during this time. Take necessary precautions for indoor activities.");
  }
  if (windspeed >= 32) {
    indoorMessage += createMessage(false, "#FFCC00", "NOTE:", "The wind speed is above 32 km/hr during this time. Take necessary precautions for your trip to your indoor activities.");
  }
  if (visibility < 3) {
    indoorMessage += createMessage(false, "#FFCC00", "NOTE:", "The visibility is less than 3 miles during this time. Take necessary precautions for your trip to your indoor activities.");
  }
  
  weatherResult.innerHTML += indoorMessage;
}
    })








       
      });
    })
    .catch(error => {
      // Handle any errors that might occur during the fetch process
      console.error('Error fetching weather data:', error);
    });






















//     activityForm.addEventListener('submit', function(event) {
//       event.preventDefault();

//       const activityName = document.getElementById('activity-name').value;
//       const activityType = document.getElementById('activity-type').value;
//       const activityDate = document.getElementById('activity-date').value;
//       const activityTime = document.getElementById('activity-time').value;

//       const currentDate = new Date();
//       const selectedDate = new Date(activityDate);
//       const isFutureDate = selectedDate > currentDate;

//       if (!isFutureDate) {
//         weatherResult.innerHTML = 'Please select a future date for your activity.';
//         return;
//       }
    
     

     
//       getWeatherCondition(selectedDate)
//     .then(weatherCondition => {
//       console.log(weatherCondition);
//       const temperature = weatherCondition.current.temperature;
//       const weatherCode = weatherCondition.current.weather_code;
//       const uv_index = weatherCondition.current.uv_index;
//         const humidity = weatherCondition.current.humidity;
//         const desc = weatherCondition.current.weather_descriptions[0];
//         const feelslike = weatherCondition.current.feelslike;
//         const cloudover = weatherCondition.current.cloudover;
//         const precip = weatherCondition.current.precip;
//         const pressure = weatherCondition.current.pressure;
//         const visibility = weatherCondition.current.visibility;
//         const windspeed = weatherCondition.current.windspeed;

//         // Weather codes for different weather conditions
// const snowyCodes = [395, 338, 326];
// const rainyCodes = [389, 359, 356];
// const drizzleCodes = [353, 263];
// const thunderstormCodes = [377];
// const sleetCodes = [365, 317, 314];
// const blizzardCode = 230;
// const fogCode = 248;
//       // Rest of your code to handle weather data...


//       if (activityType === "outdoor") {
//   let outdoorMessage = `The weather on ${activityDate} is expected to be ${desc}. Enjoy your ${activityType} activity "${activityName}"!`;

//   if (temperature >= 90) {
//     outdoorMessage += createMessage(true, "red", "WARNING:", "The temperature is above 90 degrees. Take necessary precautions for outdoor activities.");
//   }
//   if (uv_index >= 7) {
//     outdoorMessage += createMessage(true, "red", "WARNING:", "The UV index is above 7 during this time. Take necessary precautions for outdoor activities.");
//   }
//   if (humidity >= 70) {
//     outdoorMessage += createMessage(true, "red", "WARNING:", "The humidity is above 70% during this time. Take necessary precautions for outdoor activities.");
//   }
//   if (windspeed >= 32) {
//     outdoorMessage += createMessage(true, "red", "WARNING:", "The wind speed is above 32 km/hr during this time. Take necessary precautions for outdoor activities.");
//   }
//   if (visibility < 3) {
//     outdoorMessage += createMessage(true, "red", "WARNING:", "The visibility is less than 3 miles during this time. Take necessary precautions for outdoor activities.");
//   }
  
//   if (isWeatherCodePresent(snowyCodes, weatherCode)) {
//     outdoorMessage += createMessage(true, "red", "WARNING:", "There is a good chance it might snow. Take necessary precautions for outdoor activities.");
//   }
//   if (isWeatherCodePresent(rainyCodes, weatherCode)) {
//     outdoorMessage += createMessage(true, "red", "WARNING:", "There is a good chance it might rain. Take necessary precautions for outdoor activities.");
//   }
//   if (isWeatherCodePresent(drizzleCodes, weatherCode)) {
//     outdoorMessage += createMessage(true, "red", "WARNING:", "There is a good chance of rain drizzle during this time. Take necessary precautions for outdoor activities.");
//   }
//   if (isWeatherCodePresent(thunderstormCodes, weatherCode)) {
//     outdoorMessage += createMessage(true, "red", "WARNING:", "There is a good chance of a thunderstorm during this time! Take necessary precautions for outdoor activities.");
//   }
//   if (isWeatherCodePresent(sleetCodes, weatherCode)) {
//     outdoorMessage += createMessage(true, "red", "WARNING:", "There is a good chance of sleet showers during this time. Take necessary precautions for outdoor activities.");
//   }
  
//   weatherResult.innerHTML += outdoorMessage;
// }

// // Check for indoor activities
// if (activityType === "indoor") {
//   let indoorMessage = `The weather on ${activityDate} is expected to be ${desc}. Enjoy your ${activityType} activity "${activityName}"!`;

//   if (temperature >= 90) {
//     indoorMessage += createMessage(false, "orange", "NOTE:", "The temperature is above 90 degrees. Take necessary precautions for indoor activities.");
//   }
//   if (uv_index >= 7) {
//     indoorMessage += createMessage(false, "orange", "NOTE:", "The UV index is above 7 during this time. Take necessary precautions for indoor activities.");
//   }
//   if (humidity >= 70) {
//     indoorMessage += createMessage(false, "#FFCC00", "NOTE:", "The humidity is above 70% during this time. Take necessary precautions for indoor activities.");
//   }
//   if (windspeed >= 32) {
//     indoorMessage += createMessage(false, "#FFCC00", "NOTE:", "The wind speed is above 32 km/hr during this time. Take necessary precautions for your trip to your indoor activities.");
//   }
//   if (visibility < 3) {
//     indoorMessage += createMessage(false, "#FFCC00", "NOTE:", "The visibility is less than 3 miles during this time. Take necessary precautions for your trip to your indoor activities.");
//   }
  
//   weatherResult.innerHTML += indoorMessage;
// }
//     })
//     .catch(error => {
//       // Handle any errors that might occur during the fetch process
//       console.error('Error fetching weather data:', error);
//     });

     
        

// });




    function getWeatherCondition(date) {
  const city = document.getElementById("activity-city").value;
  const unit = document.getElementById("temp-unit").value;
      
  let params = new URLSearchParams({
    access_key: 'd171684972b38dd430db2f91c3564710',
    query: city,
    units: unit
  });
  
  const url = `http://api.weatherstack.com/current?${params}`;
  
  return fetch(url)
    .then(res => res.json())
    .then(weatherCondition => {
        

     
      return weatherCondition;
    });
}

  </script>
</body>
</html>